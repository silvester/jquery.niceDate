/*!
 * jQuery niceDate plugin v0.2
 * Author: Silvester MaraÅ¾
 * Url: http://maraz.org/2011/10/jquery-nicedate/
 * Licensed under the MIT license
 */
(function(d,b){var c="niceDate";function a(g,f){this.element=d(g);this.options=d.extend({},d.fn.niceDate.defaults,f);this._name=c;this.elementDefaultHtml=this.element.html();this.elementDateObject=this.options.makeTimestamp(this.elementDefaultHtml);this.elementTimestamp=this.elementDateObject.getTime()/1000;this.calculate();if(this.options.autoUpdateInterval>0){var e=this;setInterval(function(){e.update()},this.options.autoUpdateInterval)}}a.prototype.update=function(){this.options.nowDateObject=new Date();this.calculate()};a.prototype.calculate=function(){var l=this.elementTimestamp-(this.options.nowDateObject.getTime()/1000);var i=l/86400;var j=l/3600;var n=l/60;if(i>=30||i<=-30){var k=g(this.elementDateObject,this.options)}else{if((i>=1||i<=-1)||this.options.dayOnly){var k=h(i,this.options)}else{if(j>=1||j<=-1){var k=e(j,this.options)}else{var k=f(n,this.options)}}}this.element.html(k);var m=this.elementDefaultHtml;if(this.options.hoverShow){this.element.hover(function(){d(this).html(m)},function(){d(this).html(k)})}function g(p,q){return p.getDate()+". "+q.monthMessages[p.getMonth()]+" "+p.getFullYear()}function h(u,t){var q=(u>=0)?"p":"n";var p=0;if(q=="p"){var r=((u%1)*1440)+t.nowDateObject.getMinutes()+(t.nowDateObject.getHours()*60);if(r>1440){p=1}}else{var r=(t.nowDateObject.getMinutes()+(t.nowDateObject.getHours()*60))+((u%1)*1440);if(r<0){p=1}}u=Math.floor(Math.abs(u))+p;var s=(t.dayMessages[q][u])?t.dayMessages[q][u]:t.dayMessages[q]["many"];return s.replace("%s",u)}function e(s,r){var p=(s>=0)?"p":"n";s=Math.round(Math.abs(s));var q=(r.hourMessages[p][s])?r.hourMessages[p][s]:r.hourMessages[p]["many"];return q.replace("%s",s)}function f(s,r){var p=(s>=0)?"p":"n";s=Math.round(Math.abs(s));var q=(r.minMessages[p][s])?r.minMessages[p][s]:r.minMessages[p]["many"];return q.replace("%s",s)}};d.fn[c]=function(e){return this.each(function(){if(!d.data(this,"plugin_"+c)){d.data(this,"plugin_"+c,new a(this,e))}})};d.fn.niceDate.defaults={nowDateObject:new Date(),pattern:/([0-3]?[0-9]).([0|1]?[0-9]).(\d{4})\s?(\d{2})?:?(\d{2})?$/,patternOrder:[3,2,1,4,5],dayOnly:false,hoverShow:true,autoUpdateInterval:60000,monthMessages:["January","February","March","April","May","June","July","August","September","October","November","December"],dayMessages:{n:{0:"Today",1:"Yesterday",many:"%s days ago"},p:{0:"Today",1:"Tomorrow",many:"%s days later"}},hourMessages:{n:{1:"%s hour ago",many:"%s hours ago"},p:{1:"After %s hour",many:"%s hours later"}},minMessages:{n:{1:"% minute ago",many:"%s minutes ago"},p:{1:"After %s minute",many:"%s minutes later"}}};d.fn.niceDate.defaults.makeTimestamp=function(i){var h=d.fn.niceDate.defaults;var g=i.match(h.pattern);if(g){var e=(g[h.patternOrder[3]]==undefined)?0:g[h.patternOrder[3]];var f=(g[h.patternOrder[4]]==undefined)?0:g[h.patternOrder[4]];return new Date(g[h.patternOrder[0]],g[h.patternOrder[1]]-1,g[h.patternOrder[2]],e,f)}else{return false}}}(jQuery));